{
  "openapi": "3.0.1",
  "info": {
    "title": "Smart Home Technologies API",
    "version": "1.0"
  },
  "servers": [
    {
      "url": "http://192.168.1.96:60458",
      "description": "Generated server url"
    }
  ],
  "tags": [
    {
        "name": "Витрина онлайн-магазина",
        "description": "API для обеспечения работы витрины онлайн магазина"
    }
  ],
  "paths": {
      "/api/v1/shopping-store": {
          "get": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Получение списка товаров по типу в пагинированном виде",
              "operationId": "getProducts",
              "parameters": [
                  {
                      "name": "category",
                      "in": "query",
                      "description": "Тип товаров для возврата страницы: Управление, Датчики и т.д.",
                      "required": true,
                      "schema": {
                          "$ref": "common-schemas.json#/components/schemas/ProductCategory"
                      }
                  },
                  {
                      "name": "pageable",
                      "in": "query",
                      "required": true,
                      "schema": {
                          "$ref": "#/components/schemas/Pageable"
                      }
                  }
              ],
              "responses": {
                  "200": {
                      "description": "Очередная страница товаров в соответствии с типом",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "type": "array",
                                  "items": {
                                      "$ref": "common-schemas.json#/components/schemas/ProductDto"
                                  }
                              }
                          }
                      }
                  }
              }
          },
          "put": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Создание нового товара в ассортименте",
              "operationId": "createNewProduct",
              "requestBody": {
                  "description": "Описательная часть вновь добавляемого товара в систему, например нового роутера.",
                  "content": {
                      "application/json": {
                          "schema": {
                              "$ref": "common-schemas.json#/components/schemas/ProductDto"
                          }
                      }
                  },
                  "required": true
              },
              "responses": {
                  "200": {
                      "description": "Товар создан с присвоением соответствующего ID",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductDto"
                              }
                          }
                      }
                  }
              }
          },
          "post": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Обновление товара в ассортименте, например уточнение описания, характеристик и т.д.",
              "operationId": "updateProduct",
              "requestBody": {
                  "description": "Описательная часть изменяемого товара в системе",
                  "content": {
                      "application/json": {
                          "schema": {
                              "$ref": "common-schemas.json#/components/schemas/ProductDto"
                          }
                      }
                  },
                  "required": true
              },
              "responses": {
                  "404": {
                      "description": "Ошибка, товар по идентификатору в БД не найден",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductNotFoundExceptionDto"
                              }
                          }
                      }
                  },
                  "200": {
                      "description": "Товар обновлён, возвращается информация из БД",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductDto"
                              }
                          }
                      }
                  }
              }
          }
      },
      "/api/v1/shopping-store/removeProductFromStore": {
          "post": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Удалить товар из ассортимента магазина. Функция для менеджерского состава.",
              "operationId": "removeProductFromStore",
              "parameters": [
                  {
                      "name": "productId",
                      "in": "query",
                      "description": "Идентификатор товара в БД на удаление из ассортимента.",
                      "schema": {
                          "type": "string",
                          "format": "uuid"
                      }
                  }
              ],
              "requestBody": {
                  "content": {
                      "application/json": {
                          "schema": {
                              "type": "string",
                              "description": "Идентификатор товара в БД на удаление из ассортимента.",
                              "format": "uuid"
                          }
                      }
                  },
                  "required": true
              },
              "responses": {
                  "200": {
                      "description": "Признак успеха операции. true - если успешно, false - во всех остальных случаях",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "type": "boolean"
                              }
                          }
                      }
                  },
                  "404": {
                      "description": "Ошибка, товар по идентификатору в БД не найден",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductNotFoundExceptionDto"
                              }
                          }
                      }
                  }
              }
          }
      },
      "/api/v1/shopping-store/quantityState": {
          "post": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Установка статуса по товару (API вызывается со стороны склада).",
              "operationId": "setProductQuantityState",
              "parameters": [
                  {
                      "name": "setProductQuantityStateRequest",
                      "in": "query",
                      "description": "Запрос на изменение статуса товара (закончился, мало, много).",
                      "required": true,
                      "schema": {
                          "$ref": "#/components/schemas/SetProductQuantityStateRequest"
                      }
                  }
              ],
              "responses": {
                  "404": {
                      "description": "Ошибка, товар по идентификатору в БД не найден",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductNotFoundExceptionDto"
                              }
                          }
                      }
                  },
                  "200": {
                      "description": "Статус успешно обновлён",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "type": "boolean"
                              }
                          }
                      }
                  }
              }
          }
      },
      "/api/v1/shopping-store/{productId}": {
          "get": {
              "tags": [
                  "Витрина онлайн-магазина"
              ],
              "description": "Получить сведения по товару из БД.",
              "operationId": "getProduct",
              "parameters": [
                  {
                      "name": "productId",
                      "in": "path",
                      "description": "Идентификатор товара в БД.",
                      "required": true,
                      "schema": {
                          "type": "string",
                          "format": "uuid"
                      }
                  }
              ],
              "responses": {
                  "200": {
                      "description": "Актуальный товар со всеми сведениями из БД",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductDto"
                              }
                          }
                      }
                  },
                  "404": {
                      "description": "Ошибка, товар по идентификатору в БД не найден",
                      "content": {
                          "*/*": {
                              "schema": {
                                  "$ref": "common-schemas.json#/components/schemas/ProductNotFoundExceptionDto"
                              }
                          }
                      }
                  }
              }
          }
      }
  },
  "components": {
      "schemas": {
          "SetProductQuantityStateRequest": {
              "required": [
                  "productId",
                  "quantityState"
              ],
              "type": "object",
              "properties": {
                  "productId": {
                      "type": "string",
                      "description": "Идентификатор товара",
                      "format": "uuid"
                  },
                  "quantityState": {
                      "$ref": "common-schemas.json#/components/schemas/QuantityState"
                  }
              },
              "description": "Запрос на изменение статуса остатка товара"
          },
          "Pageable": {
              "type": "object",
              "properties": {
                  "page": {
                      "type": "integer",
                      "format": "int32",
                      "description": "Номер страницы"
                  },
                  "size": {
                      "type": "integer",
                      "format": "int32",
                      "description": "Размер страницы"
                  },
                  "sort": {
                      "type": "array",
                      "items": {
                          "type": "string"
                      },
                      "description": "Сортировка по полям"
                  }
              }
          }
      }
  }
}
